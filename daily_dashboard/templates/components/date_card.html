{# 'with context' required to use context_processors #}
{% from 'components/event.html' import event_container with context %}

{% macro date_card(d, platform, primary=false) %}
<div id="{{ d|string }}" class="date--card">
    <div class="header">
        <div class="date--info">
            <h2>{{ d.strftime('%A') }}</h2>
            <p>{{ format_date(d, platform) }}</p>
        </div>
        <div class="weather">
            <div class="temperatures">
                <span class="temp hi"></span>
                <span class="temp lo"></span>
            </div>
            {% if primary %}
            <img class="forecast--image" src="//:0">
            {% else %}
            <img class="forecast--image" src="//:0">
            {% endif %}
        </div>
    </div>
    <div class="event--container">
        {% for event in events %}
            {% if d|string in event.dates %}
            {{ event_container(event, d, platform) }}
            {% endif %}
        {% endfor %}
    </div>
</div>
{% endmacro %}
